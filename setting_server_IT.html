<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Setting up a remote server</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="setting_server_IT_files/libs/clipboard/clipboard.min.js"></script>
<script src="setting_server_IT_files/libs/quarto-html/quarto.js"></script>
<script src="setting_server_IT_files/libs/quarto-html/popper.min.js"></script>
<script src="setting_server_IT_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="setting_server_IT_files/libs/quarto-html/anchor.min.js"></script>
<link href="setting_server_IT_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="setting_server_IT_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="setting_server_IT_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="setting_server_IT_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="setting_server_IT_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#why-i-need-a-server" id="toc-why-i-need-a-server" class="nav-link active" data-scroll-target="#why-i-need-a-server">Why I need a server</a></li>
  <li><a href="#why-a-dedicated-server-in-a-data-center" id="toc-why-a-dedicated-server-in-a-data-center" class="nav-link" data-scroll-target="#why-a-dedicated-server-in-a-data-center">Why a dedicated server in a data center?</a></li>
  <li><a href="#how-to-select-a-server" id="toc-how-to-select-a-server" class="nav-link" data-scroll-target="#how-to-select-a-server">How to select a server</a>
  <ul class="collapse">
  <li><a href="#data-center-company" id="toc-data-center-company" class="nav-link" data-scroll-target="#data-center-company">Data center company</a></li>
  <li><a href="#needs" id="toc-needs" class="nav-link" data-scroll-target="#needs">Needs</a></li>
  <li><a href="#raid" id="toc-raid" class="nav-link" data-scroll-target="#raid">RAID</a></li>
  <li><a href="#operative-system" id="toc-operative-system" class="nav-link" data-scroll-target="#operative-system">Operative system</a></li>
  </ul></li>
  <li><a href="#steps-to-rent-a-remote-server" id="toc-steps-to-rent-a-remote-server" class="nav-link" data-scroll-target="#steps-to-rent-a-remote-server">Steps to rent a remote server</a></li>
  <li><a href="#i-have-a-remotes-server-what-now" id="toc-i-have-a-remotes-server-what-now" class="nav-link" data-scroll-target="#i-have-a-remotes-server-what-now">I have a remotes server, what now?</a>
  <ul class="collapse">
  <li><a href="#i-have-a-server-now-what" id="toc-i-have-a-server-now-what" class="nav-link" data-scroll-target="#i-have-a-server-now-what">I have a server, now what?</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Setting up a remote server</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="why-i-need-a-server" class="level2">
<h2 class="anchored" data-anchor-id="why-i-need-a-server">Why I need a server</h2>
<p>External servers help with different tasks:</p>
<ul>
<li>Get access to more computational power to perform your analyses</li>
<li>Hosting a web for a research project or research group</li>
<li>Hosting resources and applications</li>
<li>A place to share and store data</li>
<li>Others…</li>
</ul>
</section>
<section id="why-a-dedicated-server-in-a-data-center" class="level2">
<h2 class="anchored" data-anchor-id="why-a-dedicated-server-in-a-data-center">Why a dedicated server in a data center?</h2>
<p>When in need of a server (for web hosting, data sharing or computational tasks) we have two main options, hosting ourselves the server or rent a dedicated server. These servers have several advantages:</p>
<ol class="example" type="1">
<li><p>Available physical space: CREAF lacks of more space for servers, but the UAB offers space in the <strong>insert here name of the facility of UAB where servers are</strong>.</p></li>
<li><p>Downtime: Hosting ourselves a server in CREAF/UAB premises means that we depend on the UAB network. While this networks is fast and usually reliable, means that any failure in the network (at UAB or CREAF level) will affect access to the server.<br>
Remote servers on the other hand are more reliable in this case.</p></li>
<li><p>UAB firewalls: Setting up a web, RStudio server or other software to being access outside the UAB usually involves a lot of work and constant contact with CREAF and UAB IT services until is correctly configured. Even with that, UAB policies changes from time to time without much notice.<br>
Server clouds are controlled by us, so we control access and firewalls (downside is that we control access and firewall, so we need to configure them if needed).</p></li>
</ol>
</section>
<section id="how-to-select-a-server" class="level2">
<h2 class="anchored" data-anchor-id="how-to-select-a-server">How to select a server</h2>
<section id="data-center-company" class="level3">
<h3 class="anchored" data-anchor-id="data-center-company">Data center company</h3>
<p>CREAF recommends <a href="https://www.hetzner.com/">Hetzner</a> as the cloud server provider. <strong>To fill with more info</strong></p>
</section>
<section id="needs" class="level3">
<h3 class="anchored" data-anchor-id="needs">Needs</h3>
<p>Choosing a server depends largely on the work that is gonna be done in it. Usually, the most important aspects to check on the server are:</p>
<ul>
<li>RAM: RAM will limit the computational power provided by the server, specially if we work with R programming language, that relies in RAM storage for objects.<br>
</li>
<li>Processor cores: Number of cores will limit the availability of concurrent processes. Specially important when we plan on parallelize analyses or workflows.</li>
<li>Drive storage and type: Storage capacity will limit the amount of data (temporal or permanent) that we can store in the server. Drive type will affect the speed of the access to the data.</li>
<li>Location of the server: This has a legal consequence. Servers outside European Union must comply with GDPR legislation (data protection)</li>
</ul>
<p>Here we’ll describe several scenarios and the more important aspects to look at in each of them:</p>
<ol type="1">
<li><p><strong>Hosting a web page for a simple project or research group</strong><br>
Hosting simple web pages require not so much computational power, as well as storage. But it requires fast access to the files (specially if we have a static webpage). In this scenario the recommendations would be:</p>
<ul>
<li>RAM: 16GB (as its the minimum Hetzner offers in dedicated servers)</li>
<li>Cores: 6 cores (as its the minimum Hetzner offers in dedicated servers)</li>
<li>Drive type: SSD</li>
<li>Drive capacity: Depends on the web to host, but 1 Tb is more than enough</li>
<li>Location: inside EU</li>
</ul></li>
<li><p><strong>RStudio server for analyses</strong><br>
Hosting a RStudio server allows to have a centralized place for all research group members to code, share and store research projects. Different accounts can have its own Rstudio accessible from any place with internet connection. The characteristics of the server depends largely on the computations intended to be performed by the server:</p>
<ul>
<li>RAM: 16GB to 128GB. Normal work like linear models, small and medium size data… will not require big amount of RAM, 16GB will suffice. Intensive work as big data (+1 million rows), spatial data with high resolutions, parallelization of time consuming analyses… will require more RAM, up to 128GB or even more.</li>
<li>Cores: 6 cores to 20 cores. Again depends on the type of computation needed. If paralellization is going to be an important step, then more cores is better (must also be paired with more RAM)</li>
<li>Drive type: SSD, will speed the data access.</li>
<li>Drive capacity: Depend on the size of the data intended to be used, but 4 Tb is a good starting point.</li>
</ul></li>
</ol>
</section>
<section id="raid" class="level3">
<h3 class="anchored" data-anchor-id="raid">RAID</h3>
<p>If the server is intended to work also as a backup server, or data integrity is really really important, then a <a href="https://en.wikipedia.org/wiki/RAID">RAID</a> can be also configured in the server. In layman terms, a RAID system duplicate storage drives present in the server, using the duplicates for storing a copy of the data present in the *normal” drives. The extra space in the duplicated drives is not accessible, as it works mirroring the contents of the other drives.</p>
<p>This is more complex of sertting up and maintaing, and this document will not cover RAID.</p>
</section>
<section id="operative-system" class="level3">
<h3 class="anchored" data-anchor-id="operative-system">Operative system</h3>
<p>The only one, linux. Sorry, this is what it is. Windows servers are insecure by default, more exploited in the wild and require a more complex maintenance. Linux servers have also security exploits, but are easier to maintain, and applying a frequent updates policy, are more secure by default than Windows servers.</p>
</section>
</section>
<section id="steps-to-rent-a-remote-server" class="level2">
<h2 class="anchored" data-anchor-id="steps-to-rent-a-remote-server">Steps to rent a remote server</h2>
<ol type="1">
<li><p>Look at the previus sections of this document and decide what kind of server you need in terms of RAM and cores range.</p></li>
<li><p>Contact CREAF IT team at https://suport.creaf.cat/support/home and create a ticket with the following info:</p>
<ul>
<li><strong>to fill</strong></li>
</ul></li>
<li><p>Wait until IT confirms the process is done.</p></li>
<li><p>You have a remote server.</p></li>
</ol>
</section>
<section id="i-have-a-remotes-server-what-now" class="level1">
<h1>I have a remotes server, what now?</h1>
<section id="i-have-a-server-now-what" class="level2">
<h2 class="anchored" data-anchor-id="i-have-a-server-now-what">I have a server, now what?</h2>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>